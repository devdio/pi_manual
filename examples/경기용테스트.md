- 맵보드관련 사용못하는 함수
```
move_forward(self,  value, opt="-l")
move_backward(self,  value)
turn_left(self,  value=1, opt='-l')
turn_right(self,  value=1, opt='-l')
turn_back(self,  value=1, opt='-l')
toggle_linetracer(self, mode, speed=100)

```

- 라인센서를 인식하고, 로봇의 중앙으로 이동하는 것은 약 30스텝
```python
kb.move_step('f', 30, 'f', 30)
```
- 색상 스티커는 라인센서에서 모두 0으로 인식한다.
```python
left, center, right = kb.get_line_sensor(True)
print(left, center, right)
```
- 선을 찾을때까지 왼쪽으로 로봇을 회전
```python
from pyKamipi.pibot import *

kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(255, 0, 0)    # 빨강

try:
    while True:
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        print(left, center, right)

        if center == 1:
            kb.stop()
        else:
            kb.move_step('b', 20, 'f', 20)

except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

- 맵보드의 사각형을 한블록씩 움직이는 코드
```python
from pyKamipi.pibot import *

kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(255, 0, 0)    # 빨강


try:
    while True:
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        print(left, center, right)

        if left == 1 and center == 1 and right == 1:  # 모두 라인
            print("모두 라인, 정지 ")
            kb.stop()
            kb.turn_led_idx(1)  # 빨강
            kb.move_step('f', 30, 'f', 30)

            kb.move_step('b', 90, 'f', 90)
            while True:
                # 라인 센서 읽기
                left, center, right = kb.get_line_sensor(True)
                print(left, center, right)

                if center == 1:
                    print("중앙에 라인 정지 ")
                    break
                else:
                    kb.move_step('b', 10, 'f', 10)



        elif center == 1:  # 중앙에 라인
            kb.go_forward_speed(80, 80)
        elif left == 1:  # 왼쪽에 라인
            kb.go_forward_speed(30, 80)  # 좌회전 
        elif right == 1:  # 오른쪽에 라인
            kb.go_forward_speed(80, 30)  # 우회전
        else:  # 라인 없음
            print("라인 없음, 정지")
            kb.stop()
            kb.turn_led_idx(1)  # 빨강
except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()

```

## 라인트레이서 
```python
from pyKamipi.pibot import *

kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(255, 0, 0)    # 빨강


try:
    while True:
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        print(left, center, right)

        if center == 1:  # 중앙에 라인
            kb.go_forward_speed(80, 80)
        elif left == 1:  # 왼쪽에 라인
            kb.go_forward_speed(30, 80)  # 좌회전 
        elif right == 1:  # 오른쪽에 라인
            kb.go_forward_speed(80, 30)  # 우회전
        else:  # 라인 없음
            pass
except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()

```

- 모두 1일 때 90도로 회전해서 진행
```python
from pyKamipi.pibot import *

kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(255, 0, 0)    # 빨강


try:
    while True:
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        print(left, center, right)

        if left == 1 and center == 1 and right == 1: 
            print(" # 모두 라인")
            kb.stop()
            kb.move_step('f', 30, 'f', 30)
            kb.move_step('b', 90, 'f', 90)

        elif center == 1:  # 중앙에 라인
            kb.go_forward_speed(80, 80)
        elif left == 1:  # 왼쪽에 라인
            kb.go_forward_speed(30, 80)  # 좌회전 
        elif right == 1:  # 오른쪽에 라인
            kb.go_forward_speed(80, 30)  # 우회전
        else:  # 라인 없음
            pass
except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()

```

## 기본 형태

```
#-*-coding:utf-8-*-
from pyKamipi.pibot import *


# 카미봇 연결
robot = KamibotPi('COM8', 57600)
robot.init()  # 로봇 초기화

try:
    # 여기에 로봇 제어 코드 작성
    robot.go_dir_speed("f", 50, "f", 50)
    robot.delayms(1000)
    robot.stop()

except KeyboardInterrupt:
    print("프로그램 중단")
finally:
    # 프로그램 종료
    robot.stop()
    robot.close()  # 주의: sys.exit(0) 호출됨
```

## 실행 시간 측정
```python
#-*-coding:utf-8-*-
from pyKamipi.pibot import *
import time 


kb = KamibotPi('COM8', 57600)
kb.init()

try:
    start_time = time.time()
    
    # 라인 센서 읽기
    left, center, right = kb.get_line_sensor(True)
    print(f"| Line Sensor: L={left} C={center} R={right}", end=' ')

    end_time = time.time()
    loop_time = end_time - start_time
    print(f"| Time: {loop_time:.4f}s")

except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

## 직진시 라인센서 모두 1에서 멈춤
```python
#-*-coding:utf-8-*-
from pyKamipi.pibot import *
import time 

# ----------------------------------------------------
# 시간 측정 및 출력 함수
# ----------------------------------------------------
def print_loop_time(start_time, end_time):
    """
    루프 소요 시간을 계산하고 센서 값과 함께 출력합니다.
    """
    loop_time = end_time - start_time
    # 소요 시간을 소수점 4자리까지 출력
    print(f"Time: {loop_time:.4f}s")
# ----------------------------------------------------


kb = KamibotPi('COM8', 57600)
kb.init()

kb.turn_led(255, 0, 0)    # 빨강


LEFT_LINE =0
CENTER_LINE=1
RIGHT_LINE=2

last_line = (0, 1, 0)


try:
    while True:
        start_time = time.time()

        # 50, 80 100 120(?) OK
        kb.go_dir_speed("f", 100, "f", 100)
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        if left == 1 and center == 1 and right == 1:  
           kb.stop()
           # 색상확인     
           r, g, b = kb.get_color_elements(True)
           print(f"rgb ({r}, {g}, {b}) | [{left}, {center}, {right}]")
           exit()
       
        print_loop_time(start_time, time.time())
        print(f"[{left}, {center}, {right}]")

except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

## 기본적인 라인트레이싱
라인을 벗어나면 그자리에서 멈춘다. 라인센서의 값을 읽는 속도와 라인을 벗어났을때 제 빨리 라인을 찾는 좌우 바퀴의 속도 차이를 적절히 맞춰야 한다.

```python
from pyKamipi.pibot import *

kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(255, 0, 0)    # 빨강


try:
    while True:
        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)

        if center == 1:  # 중앙에 라인
            kb.go_forward_speed(50, 50)
        elif left == 1:  # 왼쪽에 라인
            kb.go_forward_speed(30, 80)  # 좌회전 
        elif right == 1:  # 오른쪽에 라인
            kb.go_forward_speed(80, 30)  # 우회전
        else:  # 라인 없음
            print("라인 없음, 정지")
            print(left, center, right)
            kb.stop()
            kb.turn_led_idx(1)  # 빨강
except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

## 제자리에서 정밀하게 돌기
스텝수를 이용해서 제자리에서 좌우로 정밀하게 회전하는 방법. 실제 테스트를 통해서 숫자값은 결정해야 한다.

```
#-*-coding:utf-8-*-
from pyKamipi.pibot import *
import time 


kb = KamibotPi('COM8', 57600)
kb.init()

try:
    start_time = time.time()
    
    # 제자리에서 한바퀴 돌기 
    kb.move_step('b', 90, 'f', 90)
    kb.move_step('b', 90, 'f', 90)
    kb.move_step('b', 90, 'f', 90)
    kb.move_step('b', 90, 'f', 90)
    
    end_time = time.time()
    loop_time = end_time - start_time
    print(f"| Time: {loop_time:.4f}s")
except KeyboardInterrupt:
    print("사용자에 의해 중단")   

finally:
    print("프로그램 중단")
    kb.stop()
    kb.close()
```

## 라인트레이서하면서 색상확인

```python
#-*-coding:utf-8-*-
from pyKamipi.pibot import *
import time 


kb = KamibotPi('COM8', 57600)
kb.init()

kb.turn_led(255, 0, 0)    # 빨강


LEFT_LINE =0
CENTER_LINE=1
RIGHT_LINE=2

last_line = (0, 1, 0)


try:
    while True:
        start_time = time.time()

        # 라인 센서 읽기
        left, center, right = kb.get_line_sensor(True)
        last_line = (left, center, right)
        if left == 1 and center == 1 and right == 1:  
            kb.go_forward_speed(40, 40)
            print(left, center, right)
            action = "ALL: 전진"
        elif center == 1:  # 중앙에 라인
            kb.go_forward_speed(40, 40)
            print(left, center, right)
            action = "CENTER: 전진 유지"
        elif left == 1:  # 왼쪽에 라인
            kb.go_forward_speed(30, 80)  # 좌회전
            print(left, center, right)
            action = "LEFT: 좌회전"
        elif right == 1:  # 오른쪽에 라인
            kb.go_forward_speed(80, 30)  # 우회전
            print(left, center, right)
            action = "RIGHT: 우회전"

        # 색상확인     
        r, g, b = kb.get_color_elements(True)
        print(f"rgb ({r}, {g}, {b})")

        end_time = time.time()
        loop_time = end_time - start_time
        print(f"[{left}, {center}, {right}] - {action} | Time: {loop_time:.4f}s")

except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

## 색상 확인
```python
#-*-coding:utf-8-*-
from pyKamipi.pibot import *
import time 


kb = KamibotPi('COM8', 57600)
kb.init()

try:
    start_time = time.time()
    
    # 색상확인     
    r, g, b = kb.get_color_elements(True)
    print(f"rgb ({r}, {g}, {b})")

    color = kb.get_color_sensor(True)
    print(f"감지된 색상 코드: {color}")

    color1 = (210, 155, 173)
    color2 = (207, 149, 166)
    color3 = (214, 162, 179)


    diff = kb.diff_color(color1, color2)
    print(f"두 색상 간의 차이: {diff}")

    diff = kb.diff_color(color1, color3)
    print(f"두 색상 간의 차이: {diff}")

    diff = kb.diff_color(color2, color3)
    print(f"두 색상 간의 차이: {diff}")


    color4= (169, 146, 183)
    diff = kb.diff_color(color1, color4)
    print(f"두 색상 간의 차이: {diff}")


    end_time = time.time()
    loop_time = end_time - start_time
    print(f"| Time: {loop_time:.4f}s")

except KeyboardInterrupt:
    print("프로그램 중단")
    kb.stop()
    exit()
finally:
    kb.close()
```

# 라인센서와 컬러센서 
빨강 : 라인센서에서 1로 인식

```python
from pyKamipi.pibot import *
import time 


kb = KamibotPi('COM8', 57600)
kb.init()
kb.turn_led(0, 255, 0)    # 빨강

SENSOR_LEFT = 0
SENSOR_CENTER = 1
SENSOR_RIGHT = 2
last_dir = SENSOR_CENTER

try:
    
    start_time = time.time()
    # **************************************************************************
    
    left, center, right = kb.get_line_sensor(True)
    print(left, center, right)
    
    # 색상확인     
    r, g, b = kb.get_color_elements(True)
    print(f"rgb ({r}, {g}, {b})")

    # **************************************************************************
    end_time = time.time()
    loop_time = end_time - start_time
    print(f"[{left}, {center}, {right}]  | Time: {loop_time:.4f}s")

except KeyboardInterrupt:
    print("프로그램 중단")
    
finally:
    kb.stop()
    kb.close()
    exit()
```
